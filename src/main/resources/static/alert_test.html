<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/layui/css/layui.css" media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>

<body>

    <blockquote class="layui-elem-quote">
        大部分演示都在 layer 独立组件的官网，与内置的 layer 模块，用法是完全一致的
    </blockquote>
    <a class="layui-btn layui-btn-normal" href="http://layer.layui.com/" target="_blank">前去 layer 官网</a>

    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
        <legend>特殊例子</legend>
    </fieldset>

    <div class="site-demo-button" id="layerDemo" style="margin-bottom: 0;">
        <blockquote class="layui-elem-quote layui-quote-nm">
            Tips：为了更清晰演示，每触发下述一个例子之前，都会关闭所有已经演示的层
        </blockquote>
        <button data-method="offset" data-type="auto" class="layui-btn layui-btn-normal">居中弹出</button>
    </div>

    <!-- 示例-970 -->
    <ins class="adsbygoogle" style="display:inline-block;width:970px;height:90px"
        data-ad-client="ca-pub-6111334333458862" data-ad-slot="3820120620"></ins>

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>再次温馨提醒</legend>
    </fieldset>
    <p class="site-demo-text">本页演示是采用了 layui 加载的 layer，如果你使用的是独立版的layer，无需通过 <code>layui.use('layer')</code> 来加载。layui
        中的 layer 与独立版的 layer 的唯一不同，就是加载方式这一点有所差异，请阅读文档：<a href="http://www.layui.com/doc/modules/layer.html#use"
            target="_blank">http://www.layui.com/doc/modules/layer.html#use</a></p>

    <script src="/layui/layui.js" charset="utf-8"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
    <script>
        layui.use('layer', function () { //独立版的layer无需执行这一句
            var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句

            //触发事件
            var active = {
                offset: function (othis) {
                    var type = othis.data('type')
                        , text = othis.text();

                    layer.open({
                        type: 1
                        , title: ["航班信息新增"]
                        , area: ["500px", "350px"]
                        , offset: type //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
                        , id: 'layerDemo' + type //防止重复弹出
                        , content: $('#test')
                        , btn: ["提交", "取消"]
                        , btnAlign: 'c' //按钮居中
                        , shade: 0 //不显示遮罩
                        , yes: function () {

                            var data = {};
                            var form= $('form').serializeArray();
                            $.each(form, function () {
                                data[this.name] = this.value;
                            });
                            var json_str=JSON.stringify(data);
                            console.log(json_str)
                            $.ajax({
                                            url: "http://localhost:8181/company/save",
                                            type: "post",
                                            contentType: "application/json",//设置请求参数类型为json字符串
                                            data: json_str, //将json对象转换成json字符串发送
                                            dataType: "json",
                                            success: function (result) {
                                            console.log(result)
                                            layer.closeAll();
                                            },
                                        });
                        }
                        , cancel: function () {
                            //右上角关闭回调
                            layer.closeAll();
                        }
                    });
                }
            };

            $('#layerDemo .layui-btn').on('click', function () {
                var othis = $(this), method = othis.data('method');
                active[method] ? active[method].call(this, othis) : '';
            });

        });
    </script>

</body>

</html>
<form class="layui-form" id="test" style="display:none">
    <div class="layui-form-item">
        <label class="layui-form-label">航空公司名</label>
        <div class="layui-input-block">
            <input id="cname" type="text" name="cname" required lay-verify="required" placeholder="请输入公司名"
                autocomplete="on" class="layui-input" style="width:200px">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">logo图标url</label>
        <div class="layui-input-block">
            <input id="logourl" type="text" name="logourl" required lay-verify="required" placeholder="请输入url"
                autocomplete="on" class="layui-input" style="width:360px">
        </div>



        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">description</label>
            <div class="layui-input-block">
                <textarea id="desc" lay-verify="required" name="description" placeholder="请输入公司描述" class="layui-textarea"
                    style="width:360px"></textarea>
            </div>
        </div>


</form>